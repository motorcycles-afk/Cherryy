<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Key - Cherry</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        /* Basic Tailwind-like utilities */
        .min-h-screen { min-height: 100vh; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .text-center { text-align: center; }
        .text-2xl { font-size: 1.5rem; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .p-8 { padding: 2rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .rounded { border-radius: 0.25rem; }
        .bg-pink-600 { background-color: #db2777; }
        .hover\:bg-pink-700:hover { background-color: #be185d; }
        .bg-green-600 { background-color: #059669; }
        .hover\:bg-green-700:hover { background-color: #047857; }
        .text-white { color: white; }
        .text-green-400 { color: #34d399; }
        .text-red-500 { color: #ef4444; }
        .text-yellow-500 { color: #f59e0b; }
        .max-w-md { max-width: 28rem; }
        .w-full { width: 100%; }
        .mx-4 { margin-left: 1rem; margin-right: 1rem; }
        .inline-block { display: inline-block; }
        
        /* Loading spinner */
        .animate-spin {
            animation: spin 1s linear infinite;
            border-radius: 50%;
            border: 2px solid rgba(219, 39, 119, 0.1);
            border-left-color: #db2777;
            height: 2rem;
            width: 2rem;
            margin: 0 auto;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Error box */
        .error-box {
            background-color: rgba(239, 68, 68, 0.1);
            border: 1px solid #ef4444;
            padding: 1rem;
            border-radius: 0.25rem;
            margin-top: 1rem;
        }

        .error-details {
            font-family: monospace;
            background-color: rgba(0, 0, 0, 0.5);
            padding: 0.5rem;
            margin-top: 0.5rem;
            border-radius: 0.25rem;
            max-height: 100px;
            overflow-y: auto;
            font-size: 0.875rem;
            white-space: pre-wrap;
        }
    </style>
</head>
<body class="bg-gray-900 text-white">
    <div id="particles-js"></div>

    <div class="min-h-screen flex items-center justify-center">
        <div class="glass p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <h1 class="text-2xl font-bold mb-4 gradient-text">Get Your Key</h1>
                <div class="key-section">
                    <button id="getKeyBtn" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded" onclick="getKey()">
                        Get Key
                    </button>
                    <div id="keyResult" class="mt-4"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const LOOTLABS_API_KEY = '61270aafb26a999472f6739e413794f3d649fc7f123412eb37a88bd0d0818061';
        const ENCRYPTED_DATA = 'b60pZUQA68CwdB0uWdCKQQ8jldDZuhgEdehf8prAQ18%3D';
        const API_ENDPOINT = 'https://be.lootlabs.gg/api/lootlabs/url_encryptor';

        async function getKey() {
            const button = document.getElementById('getKeyBtn');
            const resultDiv = document.getElementById('keyResult');
            
            try {
                button.disabled = true;
                button.innerHTML = 'Generating link...';
                resultDiv.innerHTML = '<div class="animate-spin"></div>';

                // Construct the LootLabs link with the encrypted data
                const lootlabsLink = `https://loot-link.com/s?qo0f&data=${ENCRYPTED_DATA}`;
                
                resultDiv.innerHTML = `
                    <p class="text-green-400 mb-4">Your link is ready!</p>
                    <a href="${lootlabsLink}" target="_blank" 
                       class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded inline-block">
                        Click here to continue
                    </a>
                `;
            } catch (error) {
                console.error('Error details:', error);
                showError('Error generating link.', error.message);
            } finally {
                button.disabled = false;
                button.innerHTML = 'Get Key';
            }
        }

        function showError(message, details = '') {
            const resultDiv = document.getElementById('keyResult');
            let errorHtml = `
                <div class="error-box">
                    <p class="text-red-500">${message}</p>`;
            
            if (details) {
                errorHtml += `
                    <div class="error-details text-yellow-500">${details}</div>`;
            }
            
            errorHtml += `</div>`;
            resultDiv.innerHTML = errorHtml;
        }
    </script>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</body>
</html>
