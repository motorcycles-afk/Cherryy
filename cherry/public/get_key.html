<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Key - Cherry Executor</title>
    <link rel="stylesheet" href="css/dashboard.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-900 text-white">
    <div id="particles-js"></div>

    <div class="min-h-screen flex items-center justify-center">
        <div class="glass p-8 max-w-md w-full mx-4">
            <div class="text-center">
                <h2 class="text-2xl font-bold mb-4 gradient-text">Cherry Key System</h2>
                <p class="text-gray-400 mb-6">Please complete verification to get your key</p>
                
                <div id="loginForm">
                    <input type="text" id="username" placeholder="Username" />
                    <input type="password" id="password" placeholder="Password" />
                    <button onclick="login()">Login</button>
                </div>

                <div id="progress" style="display: none;">Links visited: 0 / 3</div>

                <button id="getKeyButton" style="display: none;" onclick="getKey(); this.onclick=null;" class="bg-pink-600 hover:bg-pink-700 text-white font-bold py-2 px-4 rounded-lg transition duration-300 mb-4">
                    Get Key
                </button>

                <div id="keyResult"></div>
            </div>
        </div>
    </div>

    <script>
        const links = [
            "https://lootdest.org/s?4iIaIFkH",
            "https://loot-link.com/s?tiWbwiUA",
            "https://lootdest.org/s?tLoCu36G",
            "https://lootdest.org/s?Rn9ScbR2",
            "https://lootdest.org/s?HVIbcUwU",
            "https://lootdest.org/s?ADzl8Jk3",
            "https://loot-link.com/s?M2oo5P4j",
            "https://lootdest.org/s?a7Mm0Xjs"
        ];

        let totalLinks = 3; // Total number of links to visit
        let linksVisited = 0; // Counter for links visited

        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Simple credential check (replace with your actual authentication logic)
            if (username === 'user' && password === 'password') {
                document.getElementById('loginForm').style.display = 'none';
                document.getElementById('progress').style.display = 'block';
                document.getElementById('getKeyButton').style.display = 'block';
                // Proceed to the key generation process
            } else {
                alert('Invalid credentials. Please try again.');
            }
        }

        function getKey() {
            if (linksVisited >= totalLinks) {
                // Call the Cryptolens API to generate the key
                fetch('https://api.cryptolens.io/api/key/CreateKey?token=WyIxMDIxMzQ2NTkiLCJrMVNvb0gyaU9aOCtQZlFYcmswdFVvR05peXpFV3VZU3VMd2diU2w5Il0=&ProductId=28722&Period=1&F1=False&F2=False&F3=False&F4=False&F5=False&F6=False&F7=False&F8=False&Notes=idk&Block=False&CustomerId=0&TrialActivation=True&MaxNoOfMachines=1&NoOfKeys=0&NewCustomer=False&AddOrUseExistingCustomer=False&ResellerId=0&EnableCustomerAssociation=False&AllowActivationManagement=False&AllowMultipleUserAssociation=False&format=plaintext')
                    .then(response => response.text())
                    .then(key => {
                        document.getElementById('keyResult').innerHTML = 'Your key is: <strong>' + key + '</strong>';
                        // Redirect back to the dashboard after displaying the key
                        setTimeout(() => {
                            window.location.href = 'user-dashboard.html'; // Adjust the URL as needed
                        }, 5000);
                    })
                    .catch(error => {
                        console.error('Error generating key:', error);
                        document.getElementById('keyResult').innerHTML = 'Error generating key. Please try again.';
                    });
                return;
            }
            
            linksVisited++; // Increment the counter
            document.getElementById('progress').innerText = `Links visited: ${linksVisited} / ${totalLinks}`; // Display progress

            const resultDiv = document.getElementById('keyResult');
            resultDiv.innerHTML = '<div class="animate-spin rounded-full h-8 w-8 border-b-2 border-pink-500 mx-auto"></div>';

            // Randomly select a link from the provided list
            const randomIndex = Math.floor(Math.random() * links.length);
            const selectedLink = links[randomIndex];

            // Redirect directly to the selected link
            window.location.href = selectedLink;
        }
    </script>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
</body>
</html>